{
  "type": "v1/system",

  "node_pools": {
    "foo": {
      "instance_type": "t2.large",
      "num_instances": 3
    }
  },

  "components": {
    "ubuntu": {
      "type": "v1/job",

      "build": {
        "docker_image": {
          "registry": "registry.hub.docker.com",
          "repository": "library/ubuntu",
          "tag": "latest"
        }
      },

      "node_pool": "/:foo"
    },

    "aggregator": {
      "type": "v1/service",

      "ports": {
        "8080": {
          "protocol": "HTTP",
          "external_access": {
            "public": true
          }
        }
      },

      "build": {
        "git_repository": {
          "url": "https://github.com/mlab-lattice/testing__version-aggregator-service.git",
          "tag": "1.0.0"
        },
        "language": "node:boron",
        "command": ["npm", "install"]
      },
      "exec": {
        "command": [
          "node",
          "VersionAggregatorService.js"
        ],
        "environment": {
          "PORT": "8080"
        }
      },
      "health_check": {
        "http": {
          "port": 8080,
          "path": "/status"
        }
      },

      "num_instances": 1,
      "node_pool": "/:foo"
    },

    "version-service": {
      "type": "v1/service",

      "ports": { "8080": { "protocol": "HTTP" } },

      "build": {
        "git_repository": {
          "url": "https://github.com/mlab-lattice/testing__version-service.git",
          "tag": "dynamic"
        },
        "language": "node:boron",
        "command": ["npm", "install"]
      },

      "exec": {
        "command": [
          "node",
          "VersionService.js"
        ],
        "environment": {
          "PORT": "8080",
          "VERSION": "2.0.0"
        }
      },

      "health_check": {
        "http": {
          "port": 8080,
          "path": "/status"
        }
      },

      "num_instances": 3,
      "node_pool": "/:foo"
    }
  }
}
