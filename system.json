{
  "type": "system",
  "name": "demo",

  "node_pools": {
    "foo": {
      "instance_type": "t2.large",
      "num_instances": 3
    }
  },

  "subsystems": [
    {
      "type": "service",
      "name": "aggregator",

      "components": [
        {
          "name": "service",
          "ports": [
            {
              "name": "http",
              "port": 8080,
              "protocol": "HTTP",
              "external_access": { "public": true }
            }
          ],
          "build": {
            "git_repository": {
              "url": "https://github.com/mlab-lattice/testing__version-aggregator-service.git",
              "tag": "1.0.0"
            },
            "language": "node:boron",
            "command": "npm install"
          },
          "exec": {
            "command": [
              "node",
              "VersionAggregatorService.js"
            ],
            "environment": { "PORT": "8080" }
          },
          "health_check": {
            "http": {
              "port": "http",
              "path": "/status"
            }
          }
        }
      ],
      "resources": {
        "num_instances": 1,
        "instance_type": "t2.micro"
      }
    },
    {
      "type": "service",
      "name": "version-service",

      "components": [
        {
          "name": "service",
          "ports": [
            {
              "name": "http",
              "port": 8080,
              "protocol": "HTTP"
            }
          ],
          "build": {
            "git_repository": {
              "url": "https://github.com/mlab-lattice/testing__version-service.git",
              "tag": "dynamic"
            },
            "language": "node:boron",
            "command": "npm install"
          },
          "exec": {
            "command": [
              "node",
              "VersionService.js"
            ],
            "environment": {
              "PORT": "8080",
              "VERSION": "2.0.0"
            }
          },
          "health_check": {
            "http": {
              "port": "http",
              "path": "/status"
            }
          }
        }
      ],
      "resources": {
        "num_instances": 3,
        "node_pool": {
          "num_instances": 2,
          "instance_type": "t2.medium"
        }
      }
    }
  ]
}
