{
  "$parameters": {
    "TAG": {
      "required": true
    },
    "PORT": {
      "default": 8080
    },
    "PUBLIC": {
      "required": true
    },
    "NUM_INSTANCES": {
      "default": 1
    },
    "INSTANCE_TYPE": {
      "default": "t2.micro"
    }
  },

  "type": "service",
  "name": "service",

  "components": [
    {
      "name": "service",
      "ports": [
        {
          "name": "http",
          "port": "${PORT}",
          "protocol": "HTTP",
          "external_access": {
            "public": "${PUBLIC}"
          }
        }
      ],
      "build": {
        "git_repository": {
          "url": "https://github.com/mlab-lattice/testing__version-service",
          "tag": "${TAG}"
        },
        "language": "node:boron",
        "command": "npm install"
      },
      "exec": {
        "command": [
          "node",
          "VersionService.js"
        ],
        "environment": {
          "PORT": "${PORT}"
        }
      }
    }
  ],
  "resources": {
    "num_instances": "${NUM_INSTANCES}",
    "instance_type": "${INSTANCE_TYPE}"
  }
}